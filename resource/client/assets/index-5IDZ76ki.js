import{c as j,I as G,ae as J,a as K,i as h,N as Z,O as k,o as v,m as tt,w as et,T as nt,f as s,y as rt,u as P,a5 as at,b as _,F as R,j as z,v as T,t as V,k as L,U as it,ab as ot,g as st}from"./index-eTN858IF.js";import{k as ut,l as lt}from"./dataset-CbZsxAcs.js";import"./index-DpR8vo3Y.js";var ft={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"};function W(y){for(var d=1;d<arguments.length;d++){var p=arguments[d]!=null?Object(arguments[d]):{},g=Object.keys(p);typeof Object.getOwnPropertySymbols=="function"&&(g=g.concat(Object.getOwnPropertySymbols(p).filter(function(c){return Object.getOwnPropertyDescriptor(p,c).enumerable}))),g.forEach(function(c){ct(y,c,p[c])})}return y}function ct(y,d,p){return d in y?Object.defineProperty(y,d,{value:p,enumerable:!0,configurable:!0,writable:!0}):y[d]=p,y}var N=function(d,p){var g=W({},d,p.attrs);return j(G,W({},g,{icon:ft}),null)};N.displayName="WarningOutlined";N.inheritAttrs=!1;const pt="/assets/haveLabel-BQXUwaYK.png",dt="/assets/unHaveLabel-CjKRta7a.png";var D={exports:{}},q;function ht(){return q||(q=1,function(y,d){(function(p){y.exports=p()})(function(p){var g=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function c(i,a){var e=i[0],t=i[1],r=i[2],n=i[3];e+=(t&r|~t&n)+a[0]-680876936|0,e=(e<<7|e>>>25)+t|0,n+=(e&t|~e&r)+a[1]-389564586|0,n=(n<<12|n>>>20)+e|0,r+=(n&e|~n&t)+a[2]+606105819|0,r=(r<<17|r>>>15)+n|0,t+=(r&n|~r&e)+a[3]-1044525330|0,t=(t<<22|t>>>10)+r|0,e+=(t&r|~t&n)+a[4]-176418897|0,e=(e<<7|e>>>25)+t|0,n+=(e&t|~e&r)+a[5]+1200080426|0,n=(n<<12|n>>>20)+e|0,r+=(n&e|~n&t)+a[6]-1473231341|0,r=(r<<17|r>>>15)+n|0,t+=(r&n|~r&e)+a[7]-45705983|0,t=(t<<22|t>>>10)+r|0,e+=(t&r|~t&n)+a[8]+1770035416|0,e=(e<<7|e>>>25)+t|0,n+=(e&t|~e&r)+a[9]-1958414417|0,n=(n<<12|n>>>20)+e|0,r+=(n&e|~n&t)+a[10]-42063|0,r=(r<<17|r>>>15)+n|0,t+=(r&n|~r&e)+a[11]-1990404162|0,t=(t<<22|t>>>10)+r|0,e+=(t&r|~t&n)+a[12]+1804603682|0,e=(e<<7|e>>>25)+t|0,n+=(e&t|~e&r)+a[13]-40341101|0,n=(n<<12|n>>>20)+e|0,r+=(n&e|~n&t)+a[14]-1502002290|0,r=(r<<17|r>>>15)+n|0,t+=(r&n|~r&e)+a[15]+1236535329|0,t=(t<<22|t>>>10)+r|0,e+=(t&n|r&~n)+a[1]-165796510|0,e=(e<<5|e>>>27)+t|0,n+=(e&r|t&~r)+a[6]-1069501632|0,n=(n<<9|n>>>23)+e|0,r+=(n&t|e&~t)+a[11]+643717713|0,r=(r<<14|r>>>18)+n|0,t+=(r&e|n&~e)+a[0]-373897302|0,t=(t<<20|t>>>12)+r|0,e+=(t&n|r&~n)+a[5]-701558691|0,e=(e<<5|e>>>27)+t|0,n+=(e&r|t&~r)+a[10]+38016083|0,n=(n<<9|n>>>23)+e|0,r+=(n&t|e&~t)+a[15]-660478335|0,r=(r<<14|r>>>18)+n|0,t+=(r&e|n&~e)+a[4]-405537848|0,t=(t<<20|t>>>12)+r|0,e+=(t&n|r&~n)+a[9]+568446438|0,e=(e<<5|e>>>27)+t|0,n+=(e&r|t&~r)+a[14]-1019803690|0,n=(n<<9|n>>>23)+e|0,r+=(n&t|e&~t)+a[3]-187363961|0,r=(r<<14|r>>>18)+n|0,t+=(r&e|n&~e)+a[8]+1163531501|0,t=(t<<20|t>>>12)+r|0,e+=(t&n|r&~n)+a[13]-1444681467|0,e=(e<<5|e>>>27)+t|0,n+=(e&r|t&~r)+a[2]-51403784|0,n=(n<<9|n>>>23)+e|0,r+=(n&t|e&~t)+a[7]+1735328473|0,r=(r<<14|r>>>18)+n|0,t+=(r&e|n&~e)+a[12]-1926607734|0,t=(t<<20|t>>>12)+r|0,e+=(t^r^n)+a[5]-378558|0,e=(e<<4|e>>>28)+t|0,n+=(e^t^r)+a[8]-2022574463|0,n=(n<<11|n>>>21)+e|0,r+=(n^e^t)+a[11]+1839030562|0,r=(r<<16|r>>>16)+n|0,t+=(r^n^e)+a[14]-35309556|0,t=(t<<23|t>>>9)+r|0,e+=(t^r^n)+a[1]-1530992060|0,e=(e<<4|e>>>28)+t|0,n+=(e^t^r)+a[4]+1272893353|0,n=(n<<11|n>>>21)+e|0,r+=(n^e^t)+a[7]-155497632|0,r=(r<<16|r>>>16)+n|0,t+=(r^n^e)+a[10]-1094730640|0,t=(t<<23|t>>>9)+r|0,e+=(t^r^n)+a[13]+681279174|0,e=(e<<4|e>>>28)+t|0,n+=(e^t^r)+a[0]-358537222|0,n=(n<<11|n>>>21)+e|0,r+=(n^e^t)+a[3]-722521979|0,r=(r<<16|r>>>16)+n|0,t+=(r^n^e)+a[6]+76029189|0,t=(t<<23|t>>>9)+r|0,e+=(t^r^n)+a[9]-640364487|0,e=(e<<4|e>>>28)+t|0,n+=(e^t^r)+a[12]-421815835|0,n=(n<<11|n>>>21)+e|0,r+=(n^e^t)+a[15]+530742520|0,r=(r<<16|r>>>16)+n|0,t+=(r^n^e)+a[2]-995338651|0,t=(t<<23|t>>>9)+r|0,e+=(r^(t|~n))+a[0]-198630844|0,e=(e<<6|e>>>26)+t|0,n+=(t^(e|~r))+a[7]+1126891415|0,n=(n<<10|n>>>22)+e|0,r+=(e^(n|~t))+a[14]-1416354905|0,r=(r<<15|r>>>17)+n|0,t+=(n^(r|~e))+a[5]-57434055|0,t=(t<<21|t>>>11)+r|0,e+=(r^(t|~n))+a[12]+1700485571|0,e=(e<<6|e>>>26)+t|0,n+=(t^(e|~r))+a[3]-1894986606|0,n=(n<<10|n>>>22)+e|0,r+=(e^(n|~t))+a[10]-1051523|0,r=(r<<15|r>>>17)+n|0,t+=(n^(r|~e))+a[1]-2054922799|0,t=(t<<21|t>>>11)+r|0,e+=(r^(t|~n))+a[8]+1873313359|0,e=(e<<6|e>>>26)+t|0,n+=(t^(e|~r))+a[15]-30611744|0,n=(n<<10|n>>>22)+e|0,r+=(e^(n|~t))+a[6]-1560198380|0,r=(r<<15|r>>>17)+n|0,t+=(n^(r|~e))+a[13]+1309151649|0,t=(t<<21|t>>>11)+r|0,e+=(r^(t|~n))+a[4]-145523070|0,e=(e<<6|e>>>26)+t|0,n+=(t^(e|~r))+a[11]-1120210379|0,n=(n<<10|n>>>22)+e|0,r+=(e^(n|~t))+a[2]+718787259|0,r=(r<<15|r>>>17)+n|0,t+=(n^(r|~e))+a[9]-343485551|0,t=(t<<21|t>>>11)+r|0,i[0]=e+i[0]|0,i[1]=t+i[1]|0,i[2]=r+i[2]|0,i[3]=n+i[3]|0}function B(i){var a=[],e;for(e=0;e<64;e+=4)a[e>>2]=i.charCodeAt(e)+(i.charCodeAt(e+1)<<8)+(i.charCodeAt(e+2)<<16)+(i.charCodeAt(e+3)<<24);return a}function C(i){var a=[],e;for(e=0;e<64;e+=4)a[e>>2]=i[e]+(i[e+1]<<8)+(i[e+2]<<16)+(i[e+3]<<24);return a}function x(i){var a=i.length,e=[1732584193,-271733879,-1732584194,271733878],t,r,n,o,l,u;for(t=64;t<=a;t+=64)c(e,B(i.substring(t-64,t)));for(i=i.substring(t-64),r=i.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)n[t>>2]|=i.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(c(e,n),t=0;t<16;t+=1)n[t]=0;return o=a*8,o=o.toString(16).match(/(.*?)(.{0,8})$/),l=parseInt(o[2],16),u=parseInt(o[1],16)||0,n[14]=l,n[15]=u,c(e,n),e}function M(i){var a=i.length,e=[1732584193,-271733879,-1732584194,271733878],t,r,n,o,l,u;for(t=64;t<=a;t+=64)c(e,C(i.subarray(t-64,t)));for(i=t-64<a?i.subarray(t-64):new Uint8Array(0),r=i.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)n[t>>2]|=i[t]<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(c(e,n),t=0;t<16;t+=1)n[t]=0;return o=a*8,o=o.toString(16).match(/(.*?)(.{0,8})$/),l=parseInt(o[2],16),u=parseInt(o[1],16)||0,n[14]=l,n[15]=u,c(e,n),e}function F(i){var a="",e;for(e=0;e<4;e+=1)a+=g[i>>e*8+4&15]+g[i>>e*8&15];return a}function w(i){var a;for(a=0;a<i.length;a+=1)i[a]=F(i[a]);return i.join("")}w(x("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function i(a,e){return a=a|0||0,a<0?Math.max(a+e,0):Math.min(a,e)}ArrayBuffer.prototype.slice=function(a,e){var t=this.byteLength,r=i(a,t),n=t,o,l,u,b;return e!==p&&(n=i(e,t)),r>n?new ArrayBuffer(0):(o=n-r,l=new ArrayBuffer(o),u=new Uint8Array(l),b=new Uint8Array(this,r,o),u.set(b),l)}}();function m(i){return/[\u0080-\uFFFF]/.test(i)&&(i=unescape(encodeURIComponent(i))),i}function O(i,a){var e=i.length,t=new ArrayBuffer(e),r=new Uint8Array(t),n;for(n=0;n<e;n+=1)r[n]=i.charCodeAt(n);return a?r:t}function U(i){return String.fromCharCode.apply(null,new Uint8Array(i))}function $(i,a,e){var t=new Uint8Array(i.byteLength+a.byteLength);return t.set(new Uint8Array(i)),t.set(new Uint8Array(a),i.byteLength),t}function A(i){var a=[],e=i.length,t;for(t=0;t<e-1;t+=2)a.push(parseInt(i.substr(t,2),16));return String.fromCharCode.apply(String,a)}function f(){this.reset()}return f.prototype.append=function(i){return this.appendBinary(m(i)),this},f.prototype.appendBinary=function(i){this._buff+=i,this._length+=i.length;var a=this._buff.length,e;for(e=64;e<=a;e+=64)c(this._hash,B(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},f.prototype.end=function(i){var a=this._buff,e=a.length,t,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n;for(t=0;t<e;t+=1)r[t>>2]|=a.charCodeAt(t)<<(t%4<<3);return this._finish(r,e),n=w(this._hash),i&&(n=A(n)),this.reset(),n},f.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},f.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},f.prototype.setState=function(i){return this._buff=i.buff,this._length=i.length,this._hash=i.hash,this},f.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},f.prototype._finish=function(i,a){var e=a,t,r,n;if(i[e>>2]|=128<<(e%4<<3),e>55)for(c(this._hash,i),e=0;e<16;e+=1)i[e]=0;t=this._length*8,t=t.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(t[2],16),n=parseInt(t[1],16)||0,i[14]=r,i[15]=n,c(this._hash,i)},f.hash=function(i,a){return f.hashBinary(m(i),a)},f.hashBinary=function(i,a){var e=x(i),t=w(e);return a?A(t):t},f.ArrayBuffer=function(){this.reset()},f.ArrayBuffer.prototype.append=function(i){var a=$(this._buff.buffer,i),e=a.length,t;for(this._length+=i.byteLength,t=64;t<=e;t+=64)c(this._hash,C(a.subarray(t-64,t)));return this._buff=t-64<e?new Uint8Array(a.buffer.slice(t-64)):new Uint8Array(0),this},f.ArrayBuffer.prototype.end=function(i){var a=this._buff,e=a.length,t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r,n;for(r=0;r<e;r+=1)t[r>>2]|=a[r]<<(r%4<<3);return this._finish(t,e),n=w(this._hash),i&&(n=A(n)),this.reset(),n},f.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},f.ArrayBuffer.prototype.getState=function(){var i=f.prototype.getState.call(this);return i.buff=U(i.buff),i},f.ArrayBuffer.prototype.setState=function(i){return i.buff=O(i.buff,!0),f.prototype.setState.call(this,i)},f.ArrayBuffer.prototype.destroy=f.prototype.destroy,f.ArrayBuffer.prototype._finish=f.prototype._finish,f.ArrayBuffer.hash=function(i,a){var e=M(new Uint8Array(i)),t=w(e);return a?A(t):t},f})}(D)),D.exports}var yt=ht();const gt=J(yt),bt={class:"popup-top"},mt={class:"popup-middle"},vt={class:"ai-tabs_bar"},_t={key:0,class:"step-box-1"},wt={class:"tips-box"},At={style:{display:"flex"}},Bt=["onClick"],Ct={class:"popup-bt"},xt={class:"popup-bt-flex"},St={class:"popup-bt-flex"},I="create-company",Ut=K({__name:"index",setup(y){const d=h(!1),p=h(),g=h(),c=h(),B=h(!1);Z(()=>{document.addEventListener(`${I}-popup-dialog-show`,C);const n=new CustomEvent(`${I}-popup-dialog-ready`);document.dispatchEvent(n)}),k(()=>{x()});function C(n){d.value=n.detail.show,c.value=n.detail.callback,p.value=Number(n.detail.result.dataset_id),g.value=Number(n.detail.result.version_id)}function x(){document.removeEventListener(`${I}-popup-dialog-show`,C)}function M(){B.value||(B.value=!0,F())}async function F(){const n=document.createElement("input");n.type="file",n.accept="image/*",n.multiple=!0,n.addEventListener("change",async o=>{const u=o.target.files;if(!u||u.length===0)return"未选择文件";for(let b=0;b<u.length;b++){const S=u[b];try{const E=await t(S),H=gt.ArrayBuffer.hash(E),{width:Q,height:X}=await r(S),Y={dataset_id:p.value,version_id:g.value,file_name:S.name,file_md5:H,image_width:Q,image_height:X};await w(Y,S)}catch(E){console.error(`处理文件 ${S.name} 时出错:`,E)}}B.value=!1,c.value&&c.value("成功！"),e("")}),n.click()}async function w(n,o){const l=await ut(n);if(l&&l.code===0&&l.data.token){const u=new FormData;u.append("dataset_id",n.dataset_id.toString()),u.append("version_id",n.version_id.toString()),u.append("token",l.data.token),u.append("image",o),await lt(u)}}const m=h("1"),O=h([{label:"第一步：选择导入方式",value:"1"},{label:"第二步：上传文件",value:"2"}]);function U(){m.value="2"}function $(){m.value="1"}const A=h("1"),f=h([{key:"1",name:"图片上传",disabled:!1},{key:"2",name:"文件夹上传",disabled:!1}]);function i(n){n.disabled||(A.value=n.key)}const a=h(null);h(!1),h(!1);function e(n){const o=new CustomEvent(`${I}-popup-dialog-confirm`,{detail:{text:n}});document.dispatchEvent(o),d.value=!1,x()}function t(n){return new Promise((o,l)=>{const u=new FileReader;u.onload=b=>o(b.target.result),u.onerror=b=>l(b),u.readAsArrayBuffer(n)})}function r(n){return new Promise((o,l)=>{const u=new Image;u.src=URL.createObjectURL(n),u.onload=()=>{o({width:u.width,height:u.height}),URL.revokeObjectURL(u.src)},u.onerror=()=>l(new Error("图片加载失败"))})}return(n,o)=>(v(),tt(ot,{name:"el-fade-in"},{default:et(()=>[nt(s("div",{class:"popup-box",onMousedown:o[3]||(o[3]=l=>e(""))},[s("div",{class:"popup-cont",onMousedown:o[2]||(o[2]=rt(()=>{},["stop"]))},[s("div",bt,[o[4]||(o[4]=s("span",{class:"txt"},"本地数据导入",-1)),j(P(at),{class:"popup-close",onClick:o[0]||(o[0]=l=>e(""))})]),s("div",mt,[s("div",vt,[(v(!0),_(R,null,z(O.value,(l,u)=>(v(),_("div",{class:T(["ai-tab-item",{active:l.value===m.value}]),key:u},[s("span",null,V(l.label),1)],2))),128))]),m.value==="1"?(v(),_("div",_t,[s("div",{class:"mode-box",onClick:U},o[5]||(o[5]=[s("img",{src:pt,alt:""},null,-1),s("p",null,"带标注导入",-1),s("span",null,"上传已经完成标注的文件,或批量上传不包含目标的数据",-1)])),s("div",{class:"mode-box",onClick:U},o[6]||(o[6]=[s("img",{src:dt,alt:""},null,-1),s("p",null,"不带标注导入",-1),s("span",null,"直接上传本地数据",-1)]))])):L("",!0),m.value==="2"?(v(),_("div",{key:1,class:"step-box-2",ref_key:"stepBox2",ref:a},[s("div",wt,[j(P(N),{class:"icon"}),o[7]||(o[7]=s("span",{style:{color:"red"}},"网图素材、手机拍摄图片会影响模型训练效果，不建议使用！",-1)),o[8]||(o[8]=s("span",null,"请选用真实的角度、位置、场景下使用相机拍摄的素材进行训练。",-1))]),o[9]||(o[9]=s("div",{class:"upload-notice-title"},"上传方式",-1)),s("div",At,[(v(!0),_(R,null,z(f.value,(l,u)=>(v(),_("div",{class:T(["upload-mode-btn",{active:A.value===l.key,disabled:l.disabled}]),key:u,onClick:b=>i(l)},V(l.name),11,Bt))),128))]),o[10]||(o[10]=s("div",{class:"upload-notice-title"},"上传说明",-1)),o[11]||(o[11]=s("div",{class:"ai-scroll-bar"},[s("div",{class:"upload-notice-desc"},[s("div",{class:"upload-notice-content"},[s("ul",{class:"notice-detail-text"},[s("li",null," 上传后数据将被标注为“不包含目标”，可作为去背景误报的负样本素材，提升模型泛化性 "),s("li",null,"支持同时上传多张图片"),s("li",null,"支持图片格式：jpg、jpeg、png、bmp"),s("li",null," 图片分辨率限制：64px*64px ≤ 图片分辨率 ≤ 4096px*4096px "),s("li",null,"支持图片名称长度：1-100字符"),s("li",null,"图片名称不可以包含特殊符号$、%、&"),s("li",null,"单张图片大小 ≤ 20MB")])])])],-1))],512)):L("",!0)]),s("div",Ct,[s("div",xt,[m.value==="2"?(v(),_("button",{key:0,class:"common-btn default",onClick:$}," 上一步 ")):L("",!0)]),s("div",St,[m.value==="2"?(v(),_("button",{key:0,class:"common-btn confirm bleft",onClick:M}," 上传数据 ")):L("",!0),s("button",{class:"common-btn default bleft",onClick:o[1]||(o[1]=l=>e(""))}," 关闭 ")])])],32)],544),[[it,d.value]])]),_:1}))}}),Ft=st(Ut,[["__scopeId","data-v-61dd9670"]]);export{Ft as default};
