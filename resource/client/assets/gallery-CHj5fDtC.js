const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D6c1Yk-s.js","assets/index-eTN858IF.js","assets/index-CpWHfjKY.css","assets/dataset-CbZsxAcs.js","assets/index-DpR8vo3Y.js","assets/index-DOfc3L5t.css","assets/index-CKF60Jp8.js","assets/index-D3fkmBzT.js","assets/FilterOutlined-C9itOJfD.js","assets/ImportOutlined-CehIvsfg.js","assets/index-Vf-16Md4.css"])))=>i.map(i=>d[i]);
var Le=Object.defineProperty;var Ve=(i,n,o)=>n in i?Le(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o;var b=(i,n,o)=>Ve(i,typeof n!="symbol"?n+"":n,o);import{c as l,I as ue,d as ce,r as ve,_ as pe,a as Be,i as u,H as je,h as Qe,o as c,b as p,f as t,t as k,k as B,m as $,w as v,u as g,l as m,F as j,j as M,v as Y,J as Re,A as ie,n as Te,G as He,s as A,y as $e,S as Me,E as Ye,g as Ge}from"./index-eTN858IF.js";import{E as Je,L as Fe}from"./index-D3fkmBzT.js";import{c as qe,e as We,f as Xe,h as Ze}from"./dataset-CbZsxAcs.js";import{F as Ke}from"./FilterOutlined-C9itOJfD.js";import{I as et}from"./ImportOutlined-CehIvsfg.js";var tt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"};function de(i){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?Object(arguments[n]):{},d=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(o).filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable}))),d.forEach(function(r){nt(i,r,o[r])})}return i}function nt(i,n,o){return n in i?Object.defineProperty(i,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[n]=o,i}var G=function(n,o){var d=de({},n,o.attrs);return l(ue,de({},d,{icon:tt}),null)};G.displayName="CloudUploadOutlined";G.inheritAttrs=!1;var ot={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 112H724V72c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v40H500V72c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v40H320c-17.7 0-32 14.3-32 32v120h-96c-17.7 0-32 14.3-32 32v632c0 17.7 14.3 32 32 32h512c17.7 0 32-14.3 32-32v-96h96c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM664 888H232V336h218v174c0 22.1 17.9 40 40 40h174v338zm0-402H514V336h.2L664 485.8v.2zm128 274h-56V456L544 264H360v-80h68v32c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-32h152v32c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-32h68v576z"}}]},name:"snippets",theme:"outlined"};function re(i){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?Object(arguments[n]):{},d=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(o).filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable}))),d.forEach(function(r){at(i,r,o[r])})}return i}function at(i,n,o){return n in i?Object.defineProperty(i,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[n]=o,i}var J=function(n,o){var d=re({},n,o.attrs);return l(ue,re({},d,{icon:ot}),null)};J.displayName="SnippetsOutlined";J.inheritAttrs=!1;const st="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAAXNSR0IArs4c6QAAAGZQTFRFAAAA////39/q2ODo3d3r2d3n2d7n2t/o29/o29vp2t3p293o2tzo2tzo2N3o2dvm2dzn2dvo2dvn2tvn2dvo2dzm2Nvn2Nvm2Nzm2dvn2dvn2dzn2Nvm2dzm2dzn2dvn2Nvn2NvmbVXjPAAAACF0Uk5TAAIYISY1Njc4OURibW5wcnN6gIiOmZ25zdzd6e3v8PHyW8pWJgAAAIhJREFUOMuF0EcOwlAUQ9FL7y30EsLb/yYB6YMSknA9sDw4I5PF/0BmQAQmMIEJ2sXpVgINYkW/DGpiCdMK+Irr7vLqBQzyKviINd1zzGGYxw9I4tihN4PRPWogif17jotoAElsYVJEI0jisHlEC6j/gQlMYAITmMAEJjCBCUxgAhOYwAQmMPEEHJo9+YOEoSIAAAAASUVORK5CYII=",lt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGJSURBVFhHxZevT8QwAIXb28HlCAchU1wwGAQgKziHB4tFDwsOcwOJwc6S8IeAn8GCJThCyARcyHH0lXVZtnXrfnWfWLua9+2lbTLKnMCllE5JR1A8upQQAqAriV44Et8buYvF/Cp8NUbUgIQ5n7wJy1gTUQMS31vnTfwYayIlAHxvo3GJna3MqGwB8C8xa0Riejog95dDMSZRCgDfs2tLIPTooC/mqyupLZcvAHQkRkMqQjDGiYe/vP6S67uZmMdJKylgzjs/HYPM0yGDnnnI2e03Cb4WqXAnXE9ihWMhb/7Nw5hd8LuqfxguRYztHpnsWsReo2SyZ5H9bYsca4QD7QYkqibiXywpCgfaDUhUTTw+zUUT8rjphIPSDUhUTZyfLJNNLoINVxQOKguAvI2pSy0BwJwPLrFUWaK2AKgjUXgR6VDn2m6kAUmVPdGoACgr0bgAKCPRigDQlWhNAOhItCoAiiRaFwB5EkYEgErCmADIujGNCoCkhHEBEP/56UQAdP1XLmBO4P4BAkapiWvU/3sAAAAASUVORK5CYII=",it="/assets/empty-img-Bt3ESQLy.png",Q="create-company";let dt=class{constructor(){b(this,"component");b(this,"vnode");b(this,"node");b(this,"props");this.component=ce(()=>pe(()=>import("./index-D6c1Yk-s.js"),__vite__mapDeps([0,1,2,3,4,5]))),this.vnode=null,this.node=null,this.props={}}install(){if(!this.vnode){const n=l(this.component,this.props),o=document.createElement("div");ve(n,o),this.vnode=n,this.node=o,document.body.appendChild(this.node)}}uninstall(){this.vnode&&setTimeout(()=>{this.node&&document.body.removeChild(this.node),this.vnode=null,this.node=null},300)}async show(n,o){this.vnode||await new Promise(r=>{document.addEventListener(`${Q}-popup-dialog-ready`,r,{once:!0}),this.install()});const d=new CustomEvent(`${Q}-popup-dialog-show`,{detail:{show:!0,result:n,callback:o}});return document.dispatchEvent(d),new Promise(r=>{const w=O=>{r(O.detail.text),this.uninstall(),document.removeEventListener(`${Q}-popup-dialog-confirm`,w)};document.addEventListener(`${Q}-popup-dialog-confirm`,w)})}};const rt=new dt,R="create-company";class ut{constructor(){b(this,"component");b(this,"vnode");b(this,"node");b(this,"props");this.component=ce(()=>pe(()=>import("./index-CKF60Jp8.js"),__vite__mapDeps([6,1,2,7,3,4,8,9,10]))),this.vnode=null,this.node=null,this.props={}}install(){if(!this.vnode){const n=l(this.component,this.props),o=document.createElement("div");ve(n,o),this.vnode=n,this.node=o,document.body.appendChild(this.node)}}uninstall(){this.vnode&&setTimeout(()=>{this.node&&document.body.removeChild(this.node),this.vnode=null,this.node=null},300)}async show(n){this.vnode||await new Promise(d=>{document.addEventListener(`${R}-popup-dialog-ready`,d,{once:!0}),this.install()});const o=new CustomEvent(`${R}-popup-dialog-show`,{detail:{show:!0,result:n}});return document.dispatchEvent(o),new Promise(d=>{const r=w=>{d(w.detail.text),this.uninstall(),document.removeEventListener(`${R}-popup-dialog-confirm`,r)};document.addEventListener(`${R}-popup-dialog-confirm`,r)})}}const ct=new ut,vt="http://192.168.3.112:3002",pt={class:"content-box"},mt={class:"pageBreadTitle"},gt={class:"bread-item curr-bread"},ft={class:"version-main"},ht={key:0,class:"common-load-box"},At={class:"version-detail"},_t={class:"version-detail-title"},bt={class:"version-detail-title-half"},yt={class:"txt"},kt={class:"version-detail-title-half"},Ct={class:"common-btn default padding"},wt={class:"common-btn default padding ver-btn-l"},Ot={class:"ai-tabs_bar"},It=["onClick"],Et={class:"filter-group-wrap"},xt={class:"filter-group-wrap-flex"},St={class:"common-btn default padding",style:{"margin-left":"20px"}},Pt={class:"gallery-dropdown"},Ut={class:"filter-group-wrap-flex"},Dt={class:"txt"},zt={key:0,class:"card-manage-content"},Nt={class:"card-box"},Lt={class:"card-block"},Vt=["onClick"],Bt={key:0,src:st,alt:""},jt={key:1,src:lt,alt:""},Qt=["onClick"],Rt=["src"],Tt={class:"card-name"},Ht={class:"text-ellipsis"},$t={class:"flex-icon"},Mt={key:1,class:"empty-cover"},Yt={class:"version-detail-page"},Gt={class:"modal-text"},Jt=Be({__name:"gallery",setup(i){const n=Te(),o=He(),d=u(),r=u();d.value=Number(o.query.id),r.value=Number(o.query.vid);const w=u(je("token")),[O,me]=Qe.useMessage(),I=u(!0),F=u(),D=u(),h=u({page:1,size:30,count:0}),z=u([]),T=u("1"),ge=u([{label:"未标注",value:"1"},{label:"已标注",value:"2"},{label:"待确认",value:"3"}]);function fe(a){T.value=a,y()}const q=u("1"),W=u([{key:"1",name:"上传时间升序"},{key:"2",name:"上传时间降序"}]);function he(a){q.value=a}function Ae(){const a={dataset_id:d.value,version_id:r.value};Fe.show(a,e=>{e&&(y(),O.success("数据导入成功！"))})}function _e(){}function be(){I.value=!0,qe(r.value).then(a=>{a&&a.code===0&&(D.value=a.data)})}function y(){I.value=!0,We({dataset_id:d.value,version_id:r.value,type:Number(T.value),order:"DESC",page:h.value.page,size:h.value.size}).then(a=>{a&&a.code===0&&(z.value=a.data.list,h.value=a.data.page)}).finally(()=>I.value=!1)}const ye=a=>{h.value.page=a,y()},ke=(a,e)=>{h.value.page=1,h.value.size=e,y()};function N(a,e,_){n.push({path:a,query:{id:e,vid:_}})}const S=u(!1),H=u(!1),P=u({id:0,name:"",image_long_id:""}),Ce=a=>{S.value=!0,P.value=a},X=()=>{H.value=!0,Xe(P==null?void 0:P.value.id).then(a=>{a&&a.code===0&&(O.success("删除成功！"),y())}).finally(()=>{H.value=!1,S.value=!1})},we=()=>{S.value=!1};function Oe(a){rt.show(a,e=>{e&&(O.success("编辑成功！"),y())})}function Ie(a){ct.show(a)}const f=u([]),Z=u(!1),K=u(!1),L=u(!1);function Ee(){L.value=!0}function xe(){L.value=!1,f.value=[]}function Se(a){var _,C,E;let e=((_=f.value)==null?void 0:_.findIndex(V=>V===a.id))||-1;e===-1?(C=f.value)==null||C.push(a.id):(E=f.value)==null||E.splice(e,1)}function Pe(a){var _;return f.value.length?(((_=f.value)==null?void 0:_.findIndex(C=>C===a.id))||-1)!==-1:void 0}function Ue(){f.value.length&&Ze({ids:f.value}).then(a=>{a&&a.code===0&&(O.success("删除成功！"),y())})}return be(),y(),(a,e)=>{var oe,ae,se,le;const _=A("a-spin"),C=A("a-tag"),E=A("a-menu-item"),V=A("a-menu"),ee=A("a-dropdown"),De=A("a-input-search"),te=A("a-checkbox"),ze=A("a-pagination"),ne=A("a-button"),Ne=A("a-modal");return c(),p("div",pt,[t("div",mt,[t("div",{class:"bread-item cursor-bread",onClick:e[0]||(e[0]=s=>N("/home"))}," 数据总览 "),e[10]||(e[10]=t("div",{class:"bread-item"},">",-1)),t("div",{class:"bread-item cursor-bread",onClick:e[1]||(e[1]=s=>N("/data/overall",d.value))}," 全部版本 "),e[11]||(e[11]=t("div",{class:"bread-item"},">",-1)),t("div",gt,"V"+k((oe=D.value)==null?void 0:oe.version),1)]),t("div",ft,[I.value?(c(),p("div",ht,[l(_)])):B("",!0),t("div",At,[t("div",_t,[t("div",bt,[t("div",yt,"版本：V"+k((ae=D.value)==null?void 0:ae.version),1),(se=D.value)!=null&&se.status?(c(),$(C,{key:1,bordered:!1,color:"success",style:{"margin-inline-end":"0","margin-left":"20px"}},{default:v(()=>e[13]||(e[13]=[m("已发布")])),_:1})):(c(),$(C,{key:0,bordered:!1,color:"warning",style:{"margin-inline-end":"0","margin-left":"20px"}},{default:v(()=>e[12]||(e[12]=[m("未发布")])),_:1})),t("div",{class:"btn-link primary",onClick:e[2]||(e[2]=s=>N("/data/overall",d.value))}," 版本详情 ")]),t("div",kt,[l(ee,{trigger:["hover"]},{overlay:v(()=>[l(V,null,{default:v(()=>[l(E,{key:"1"},{default:v(()=>[t("div",{class:"gallery-dropdown",onClick:Ae}," 本地数据 ")]),_:1}),l(E,{key:"2",disabled:!0,style:{opacity:"0.5"}},{default:v(()=>[t("div",{class:"gallery-dropdown",onClick:_e}," 已有数据集 ")]),_:1})]),_:1})]),default:v(()=>[t("button",Ct,[l(g(et)),e[14]||(e[14]=m(" 数据导入 "))])]),_:1}),t("button",{class:"common-btn default padding ver-btn-l",onClick:e[3]||(e[3]=s=>N("/data/mark",d.value,r.value))},[l(g(Je)),e[15]||(e[15]=m(" 标注图片 "))]),t("button",wt,[l(g(G)),e[16]||(e[16]=m(" 发布版本 "))])])]),t("div",Ot,[(c(!0),p(j,null,M(ge.value,(s,x)=>(c(),p("div",{class:Y(["ai-tab-item",{active:s.value===T.value}]),key:x,onClick:U=>fe(s.value)},[t("span",null,k(s.label),1)],10,It))),128))]),t("div",Et,[t("div",xt,[l(De,{value:F.value,"onUpdate:value":e[4]||(e[4]=s=>F.value=s),placeholder:"搜索图片名称",style:{width:"220px"}},null,8,["value"]),t("button",St,[l(g(Ke)),e[17]||(e[17]=m(" 筛选 "))]),l(ee,{trigger:["click"]},{overlay:v(()=>[l(V,null,{default:v(()=>[(c(!0),p(j,null,M(W.value,(s,x)=>(c(),$(E,{key:s.key,onClick:U=>he(s.key)},{default:v(()=>[t("div",Pt,k(s.name),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:v(()=>{var s;return[t("button",{class:"common-btn default padding",style:{"margin-left":"20px"},onClick:e[5]||(e[5]=$e(()=>{},["prevent"]))},[l(g(Me),{style:{transform:"rotate(90deg)"}}),m(" "+k((s=W.value.find(x=>x.key===q.value))==null?void 0:s.name),1)])]}),_:1})]),t("div",Ut,[L.value?(c(),p(j,{key:1},[t("div",Dt,"已选择数据 "+k(((le=f.value)==null?void 0:le.length)||0)+" 条",1),l(te,{checked:Z.value,"onUpdate:checked":e[6]||(e[6]=s=>Z.value=s)},{default:v(()=>e[19]||(e[19]=[m("全选所有")])),_:1},8,["checked"]),l(te,{checked:K.value,"onUpdate:checked":e[7]||(e[7]=s=>K.value=s)},{default:v(()=>e[20]||(e[20]=[m("全选当前页")])),_:1},8,["checked"]),t("button",{class:Y(["common-btn default padding",{disabled:!f.value.length}]),style:{"margin-left":"20px"}},[l(g(Re)),e[21]||(e[21]=m(" 不包含目标 "))],2),t("button",{class:Y(["common-btn default padding",{disabled:!f.value.length}]),style:{"margin-left":"20px"},onClick:Ue},[l(g(ie)),e[22]||(e[22]=m(" 批量删除 "))],2),t("button",{class:"common-btn default padding",style:{"margin-left":"20px"},onClick:xe}," 退出 ")],64)):(c(),p("button",{key:0,class:"common-btn default padding",style:{"margin-left":"20px"},onClick:Ee},[l(g(J)),e[18]||(e[18]=m(" 批量管理 "))]))])]),!I.value&&z.value.length?(c(),p("div",zt,[(c(!0),p(j,null,M(z.value,(s,x)=>(c(),p("div",{class:"card-item",key:x},[t("div",Nt,[t("div",Lt,[L.value?(c(),p("div",{key:0,class:"card-mask",onClick:U=>Se(s)},[Pe(s)?(c(),p("img",jt)):(c(),p("img",Bt))],8,Vt)):B("",!0),t("div",{class:"card-img",onClick:U=>Ie(s)},[t("img",{src:g(vt)+"/api/v1/dataset/version/data/preview/"+s.image_long_id+"?_="+w.value,alt:""},null,8,Rt)],8,Qt),t("div",Tt,[t("span",Ht,k(s.name),1),t("div",$t,[l(g(ie),{class:"icon",onClick:U=>Ce(s)},null,8,["onClick"]),l(g(Ye),{class:"icon",onClick:U=>Oe(s)},null,8,["onClick"])])])])])]))),128))])):B("",!0),!I.value&&!z.value.length?(c(),p("div",Mt,e[23]||(e[23]=[t("img",{src:it,alt:""},null,-1),t("span",null,"暂无图片",-1)]))):B("",!0),t("div",Yt,[l(ze,{current:h.value.page,"onUpdate:current":e[8]||(e[8]=s=>h.value.page=s),defaultPageSize:h.value.size,"show-quick-jumper":"",showSizeChanger:"",total:h.value.count,onChange:ye,onShowSizeChange:ke},null,8,["current","defaultPageSize","total"])])]),l(g(me)),l(Ne,{open:S.value,"onUpdate:open":e[9]||(e[9]=s=>S.value=s),title:"提示",onOk:X},{footer:v(()=>[l(ne,{key:"back",onClick:we},{default:v(()=>e[24]||(e[24]=[m("取消")])),_:1}),l(ne,{key:"submit",type:"primary",loading:H.value,onClick:X},{default:v(()=>e[25]||(e[25]=[m("确认")])),_:1},8,["loading"])]),default:v(()=>{var s;return[t("div",Gt,"确定删除 "+k((s=P.value)==null?void 0:s.name)+" 图片 ?",1),e[26]||(e[26]=t("div",{class:"modal-desc"},"删除后将无法找回。",-1))]}),_:1},8,["open"])])])}}}),Ft=Ge(Jt,[["__scopeId","data-v-5ea768e3"]]),nn=Object.freeze(Object.defineProperty({__proto__:null,default:Ft},Symbol.toStringTag,{value:"Module"}));export{nn as g,vt as i};
