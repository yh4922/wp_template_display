const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DuMlWVSh.js","assets/index-eTN858IF.js","assets/index-CpWHfjKY.css","assets/dataset-CbZsxAcs.js","assets/index-DpR8vo3Y.js","assets/common-WSqv98V6.js","assets/index-C5wDPawx.css","assets/index-C7zxNhOi.js","assets/index-avI9pVIV.css"])))=>i.map(i=>d[i]);
var Aa=Object.defineProperty;var Ea=(m,t,o)=>t in m?Aa(m,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):m[t]=o;var f=(m,t,o)=>Ea(m,typeof t!="symbol"?t+"":t,o);import{d as ea,c as l,r as ta,_ as sa,a as na,o as r,b as y,e as xa,f as n,g as oa,h as Da,i as d,F as j,j as K,k as R,u as b,l as E,t as x,m as B,w as _,n as Va,p as s,M as za,q as aa,D as Na,s as w,v as Oa,R as Pa,x as Fa,y as L,P as Ma,z as Ra,E as Ia,A as Sa,B as Ta}from"./index-eTN858IF.js";import{P as qa,g as Ba,C as La}from"./common-WSqv98V6.js";import{_ as Wa}from"./index.vue_vue_type_script_setup_true_lang-CN4QwITc.js";import{C as Xa}from"./index-DZq3jriJ.js";import{d as Ya,r as Za,a as Ha,g as Ua,b as Qa}from"./dataset-CbZsxAcs.js";import"./index-DpR8vo3Y.js";const Ja="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAABMdJREFUSMfdld+LnGcVxz/ned55Z2YnO5NtuqXbhGQFrTj5A6w3JogFCfgTRkSlvVHohfe93Jk/QVAoRXohopAFQYu9CdhEEG8achEcQQQ3xey2JN3Jzs7MzszznHN6MbNmd03/AR848MJz3s/3PN+H8xz4P14u7ki368Hdw82bHk+Gu4fFHgIun0UJz0S7S7e7+HFjg7i9TTEeUwFKoByPqWxvU2xsEGGR6/5sEXkWfHt7OwwGnVCWxEaD4vHjg0qMrRjCOAKYNVT1QJ9/vpXGY/J8jq6tbVun0zER8c8QWFRy7Rrh/v1/xRhblWp1vRSZ1IJyMaE/A/n6sohbpcRfjmY8rNdXprP/PJrrc+tpfx8FrNvFYSEUjqt2R3Z378adHYoXX/x8rSgaq2bpsqp152533HnN3V9y95fceP0o+Z0CurP98eV5q7FarVK7coVid/dudH9qmTy1hTAe71Tm81a12ayvHR7qG+76Bkjr5JHNBFPBFEwFjANzeYui/tZsNhhMpwezdnszdTqYiHgA6PWQ9XUkxnqsVNbK4TD9yd3ePAl3A02yDNAsaIaUpJXm8uZ8NHt3ZWWtbDQ2Y7+PiCyKDwBbW/DoDuHoqCxUj6rucgt8eAzXvASqLMGLsByW32Foyp+P9o+qqoMCCN3lVRfHkI+eQwoNoZzMilyr/jZG+cCV6zn7q2ZyWRXcFlW7hYVFxoeI3CqE2xbDPy17wZO18MkYudA70werqzvSokU+VxMR+2FOvJ0TN0zDXVN5Bwv3LIdD13ioWe5BeMct3E1Tbkwm4e3piB/kWBNacOEQ2eLMCWCTo3Ioae7iWnzLjLopdVO+ay4zTO6J83s3wZQvWpYfqXrVNKDq4OF7sTb7hepMoPlf6lOBBzBswupq1Uez/JPgoeMWvmnqF1WlasorbvKKKaiCK5gF3OQh8G4Mvh1HVVedsQP0zgo8AF6oNX06nQKVoMnOq/PHYMHc5KuW5aqqh8U9iDn8PRD+klSDW1jzWIQYoVptnurkExbtcHCwSa2G69R/ZSZXTCGZHKD8DeN9dy66OYg89CQvzxI/NostUyEpXy7O8bXxMXEL6B4L9KDNpg0EG5lrVvmdZ/+pWbxgmZaZfMNVXjUPH5qBZfmOZo9uoCqY8YkEbqY5er6K1TaxJX8h0AM2NvC8h+rUksTKr0Ow91KyG67Ft035kirRjc/pyS4m/COI/SGU9p5I8bgCaXqI7g5wWb5yEeD2dZHXLl9nMCOsUEpISUSCWRF3yLzvhA8shYpmWbMsU7fw10rwn4dSfhOD3C8lPLHMSM8zGUO6do189Srcvt1zOflE9/tXY6PRrtT3D2tPQrESrF73nM6lIDVLVM2LSIa5ZhWYmfi0oDIKzpEJk1Rn+uABqdNBT71FIkK/3/d2u63NJvP5+uqkWJ0OgcGkzI/yRD8OYnsyZy8ZezHYXiXqx6XnRwQGOTNcL5l8Ycgc0P73n1p0auA4Lr0usuzw0GwSh/+mQkFRZuJAF5YWEa0WKJncLEjD1mIOnJ0F/zMyBfFuVwywrS3ypUvMucCUAZNawajxAsNGZrheMNoZMOEjppe+whzIC7jYSfgzR+aZoU+vt8hpt0/n9vs4XdjyYztOg4/Xpyoy8X1LCt+IAAAAAElFTkSuQmCC",I="create-company";let $a=class{constructor(){f(this,"component");f(this,"vnode");f(this,"node");f(this,"props");this.component=ea(()=>sa(()=>import("./index-DuMlWVSh.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),this.vnode=null,this.node=null,this.props={}}install(){if(!this.vnode){const t=l(this.component,this.props),o=document.createElement("div");ta(t,o),this.vnode=t,this.node=o,document.body.appendChild(this.node)}}uninstall(){this.vnode&&setTimeout(()=>{this.node&&document.body.removeChild(this.node),this.vnode=null,this.node=null},300)}async show(t,o){this.vnode||await new Promise(v=>{document.addEventListener(`${I}-popup-dialog-ready`,v,{once:!0}),this.install()});const g=new CustomEvent(`${I}-popup-dialog-show`,{detail:{show:!0,callback:o,data_type:t}});return document.dispatchEvent(g),new Promise(v=>{const u=D=>{v(D.detail.text),this.uninstall(),document.removeEventListener(`${I}-popup-dialog-confirm`,u)};document.addEventListener(`${I}-popup-dialog-confirm`,u)})}};const Ga=new $a,S="create-company";class ja{constructor(){f(this,"component");f(this,"vnode");f(this,"node");f(this,"props");this.component=ea(()=>sa(()=>import("./index-C7zxNhOi.js"),__vite__mapDeps([7,1,2,3,4,8]))),this.vnode=null,this.node=null,this.props={}}install(){if(!this.vnode){const t=l(this.component,this.props),o=document.createElement("div");ta(t,o),this.vnode=t,this.node=o,document.body.appendChild(this.node)}}uninstall(){this.vnode&&setTimeout(()=>{this.node&&document.body.removeChild(this.node),this.vnode=null,this.node=null},300)}async show(t,o){this.vnode||await new Promise(v=>{document.addEventListener(`${S}-popup-dialog-ready`,v,{once:!0}),this.install()});const g=new CustomEvent(`${S}-popup-dialog-show`,{detail:{show:!0,id:t,callback:o}});return document.dispatchEvent(g),new Promise(v=>{const u=D=>{v(D.detail.text),this.uninstall(),document.removeEventListener(`${S}-popup-dialog-confirm`,u)};document.addEventListener(`${S}-popup-dialog-confirm`,u)})}}const Ka=new ja,ae="/assets/prepare_data-BkjQsJQ7.png",ee={class:"default-process"},te=na({__name:"defaultProcess",emits:["createFunc"],setup(m,{emit:t}){const o=t;function g(){o("createFunc")}return(v,u)=>(r(),y("div",ee,[u[0]||(u[0]=xa('<div class="process-wrap" data-v-0acba068><div class="process-step" data-v-0acba068><div class="normal" data-v-0acba068><div class="step" data-v-0acba068>1</div><div class="step-name" data-v-0acba068>创建模型</div></div><div class="line" data-v-0acba068></div></div><div class="process-step" data-v-0acba068><div data-v-0acba068><div class="child-point" data-v-0acba068><div class="child-name selected" data-v-0acba068>创建数据集</div><div class="child-name" data-v-0acba068>数据标注</div><div class="child-name" data-v-0acba068>数据诊断</div></div><div class="point-wrap" data-v-0acba068><div class="point-item" data-v-0acba068><div class="point point-selected" data-v-0acba068></div><div class="point-line" data-v-0acba068></div></div><div class="point-item" data-v-0acba068><div class="point" data-v-0acba068></div><div class="point-line" data-v-0acba068></div></div><div class="point-item" data-v-0acba068><div class="point" data-v-0acba068></div></div></div><div class="step-name selected" data-v-0acba068>数据准备</div></div><div class="line" data-v-0acba068></div></div><div class="process-step" data-v-0acba068><div class="normal" data-v-0acba068><div class="step" data-v-0acba068>3</div><div class="step-name" data-v-0acba068>模型训练</div></div><div class="line" data-v-0acba068></div></div><div class="process-step" data-v-0acba068><div class="normal" data-v-0acba068><div class="step" data-v-0acba068>4</div><div class="step-name" data-v-0acba068>发布/导出模型</div></div></div></div><div class="content-wrap" data-v-0acba068><div class="title" data-v-0acba068>现在开始准备数据</div><div class="message" data-v-0acba068> 我们为您提供了丰富的数据服务功能，从创建数据集开始体验它们吧！ </div></div><img src="'+ae+'" class="prepare_data" alt="" data-v-0acba068>',3)),n("button",{class:"common-btn confirm bcontent",onClick:g}," 立即创建 ")]))}}),se=oa(te,[["__scopeId","data-v-0acba068"]]),ne={class:"content-box"},oe={class:"ai-tabs_bar"},le=["onClick"],ie={key:0,class:"empty-box"},de={class:"filter-box"},ce={class:"filter-f"},ve={class:"filter-f"},ue={key:2,class:"table-collapse"},pe=["onClick"],re={class:"data-title"},me={class:"data-btn"},he=["onClick"],fe=["onClick"],be=["onClick"],_e=["onClick"],ye={key:0,class:"version-table-wrap"},ge={class:"modal-text"},Ce={class:"modal-desc"},ke=na({__name:"index",setup(m){const t=Va(),[o,g]=Da.useMessage(),v=d(!0),u=d("train"),D=d([{label:"训练集",value:"train"},{label:"测试集",value:"test"}]);function la(a){u.value=a,k()}const W=d("");function ia(){}const T=d([]),h=d(!1),V=d(!1),z=d(1),O=d(""),P=d(""),F=d(""),da=a=>{O.value=a.id,h.value=!0,z.value=1,P.value="确定删除数据集 "+a.name+" ?",F.value="删除后将无法找回。"},ca=a=>{O.value=a.id,h.value=!0,z.value=0;const e=C.value.find(c=>c.id===p.value[0]);P.value=`确定删除 ${e==null?void 0:e.name}/V${a.version} ?`,F.value="删除后，该版本的数据不可恢复，但不影响所属数据集下其他版本。"},X=()=>{V.value=!0;const a=O.value;z.value===1?Ya(a).then(e=>{e&&e.code===0&&(o.success("删除成功！"),k())}).finally(()=>{V.value=!1,h.value=!1}):z.value===2?Za(a).then(e=>{e&&e.code===0&&(o.success("发布成功！"),M(p.value[0]))}).finally(()=>{V.value=!1,h.value=!1}):Ha(a).then(e=>{e&&e.code===0&&(o.success("删除成功！"),k(),M(p.value[0]))}).finally(()=>{V.value=!1,h.value=!1})},va=()=>{h.value=!1},C=d([]),Y=d(1),Z=d(15),ua=d(0),pa=d([{title:"算法类型",dataIndex:"alg_type",key:"alg_type",id:"",customRender:({record:a})=>s("span",[s("span",{},ga(a.alg_type))])},{title:"最新版本",dataIndex:"version",key:"version",id:"",customRender:({record:a})=>s("span",[s("span",{},"V"+a.version)])},{title:"已标注图片数/总图片数",dataIndex:"image_num",key:"image_num",id:"",customRender:({record:a})=>s("span",[s("span",{},a.markup_image_num+"/"+a.image_num)])},{title:"数据状态",dataIndex:"status",key:"status",id:"",customRender:({record:a})=>s("span",[s("span",{},a.status?"已发布":"未发布")])},{title:"操作",dataIndex:"action",key:"action",id:"",customRender:({record:a})=>{const e=[s("a",{onClick:()=>Q(a)},"查看"),s("div",{class:"custom-divider"}),s(Na,{},{default:()=>s("a",{onClick:()=>Q(a)},"导入"),overlay:()=>s(za,null,[s(aa,{key:"1",onClick:()=>{}},"本地数据"),s(aa,{key:"2",disabled:!0},"已有数据集")])}),s("div",{class:"custom-divider"}),s("a",{onClick:()=>_a("/data/mark")},"标注"),s("div",{class:"custom-divider"})];return a.status||e.push(s("a",{onClick:()=>fa(a)},"发布"),s("div",{class:"custom-divider"})),e.push(s("a",{onClick:()=>ca(a)},"删除")),s("span",e)}}]),H=d([]),p=d(["1"]);async function ra(a){if(p.value[0]===a.id)return p.value=[];await M(a.id),p.value=[],p.value.push(a.id)}function U(a){return p.value.find(c=>c===a.id)}const ma=a=>{t.push({path:"/data/overall",query:{id:a.id}})},ha=a=>{La.show(a.id,e=>{e&&p.value.length&&(k(),M(p.value[0]))})},Q=a=>{const e=C.value.find(A=>A.id===p.value[0]),c=a.id;t.push({path:"/data/overall/gallery",query:{id:e==null?void 0:e.id,vid:c}})},fa=a=>{O.value=a.id,h.value=!0,z.value=2;const e=C.value.find(c=>c.id===p.value[0]);P.value=`确定发布 ${e==null?void 0:e.name}/V${a.version} ?`,F.value=""};async function M(a){const e=await Ua({page:1,size:1,dataset_id:a});e&&e.code===0&&(H.value=[...e.data.list])}function k(){v.value=!0,Qa({page:Y.value,size:Z.value,data_type:u.value}).then(a=>{a&&a.code===0&&(C.value=a.data.list,Y.value=a.data.page.page,Z.value=a.data.page.size,ua.value=a.data.page.count)}).finally(()=>v.value=!1)}function J(){Ga.show(u.value,a=>{a&&k()})}function ba(a){Ka.show(a.id,e=>{e&&k()})}function _a(a){t.push({path:a})}function ya(){Ba().then(a=>{a&&(a==null?void 0:a.code)===0&&a.data.forEach(e=>{var c;(c=T.value)==null||c.push({value:e.name,label:e.label})})})}function ga(a){var c;let e="";return(c=T.value)==null||c.forEach(A=>{A.value===a&&(e=A.label)}),e}return ya(),k(),(a,e)=>{const c=w("a-spin"),A=w("a-input-search"),$=w("a-menu-item"),Ca=w("a-menu"),ka=w("a-dropdown"),G=w("a-button"),wa=w("a-modal");return r(),y("div",ne,[e[9]||(e[9]=n("div",{class:"pageTitle"},"数据总览",-1)),n("div",oe,[(r(!0),y(j,null,K(D.value,(i,q)=>(r(),y("div",{class:Oa(["ai-tab-item",{active:i.value===u.value}]),key:q,onClick:N=>la(i.value)},[n("span",null,x(i.label),1)],10,le))),128))]),v.value?(r(),y("div",ie,[l(c,{size:"large"})])):R("",!0),n("div",de,[n("div",ce,[l(A,{value:W.value,"onUpdate:value":e[0]||(e[0]=i=>W.value=i),placeholder:"请输入数据集名称",style:{width:"220px"},onSearch:ia},null,8,["value"]),l(Wa,{options:T.value},null,8,["options"])]),n("div",ve,[n("div",{class:"common-btn confirm",onClick:J},[l(b(qa),{class:"collapse-arraw-icon"}),E(" "+x(u.value==="train"?"创建训练集":"创建测试集"),1)])])]),!v.value&&!C.value.length?(r(),B(se,{key:1,onCreateFunc:J})):R("",!0),!v.value&&C.value.length?(r(),y("div",ue,[(r(!0),y(j,null,K(C.value,(i,q)=>(r(),y("div",{class:"version-collapse",key:q},[n("div",{class:"collapse-title",onClick:N=>ra(i)},[U(i)?(r(),B(b(Fa),{key:1,class:"collapse-arraw-icon"})):(r(),B(b(Pa),{key:0,class:"collapse-arraw-icon"})),n("div",re,[e[2]||(e[2]=n("img",{src:Ja,alt:""},null,-1)),n("span",null,x(i.name),1)]),n("div",me,[n("div",{class:"common-btn noborder pleft",onClick:L(N=>ha(i),["stop"])},[l(b(Ma),{class:"collapse-arraw-icon"}),e[3]||(e[3]=E(" 创建新版本 "))],8,he),n("div",{class:"common-btn noborder pleft",onClick:L(N=>ma(i),["stop"])},[l(b(Ra),{class:"collapse-arraw-icon"}),E(" 全部版本（"+x(i==null?void 0:i.version_num)+"） ",1)],8,fe),l(ka,null,{overlay:_(()=>[l(Ca,null,{default:_(()=>[l($,null,{default:_(()=>[n("div",{class:"collapse-item",onClick:N=>ba(i)},[l(b(Ia),{class:"collapse-arraw-icon"}),e[5]||(e[5]=n("span",{class:"collapse-txt"},"编辑数据集名称",-1))],8,be)]),_:2},1024),l($,null,{default:_(()=>[n("div",{class:"collapse-item",onClick:N=>da(i)},[l(b(Sa),{class:"collapse-arraw-icon"}),e[6]||(e[6]=n("span",{class:"collapse-txt"},"删除数据集",-1))],8,_e)]),_:2},1024)]),_:2},1024)]),default:_(()=>[n("div",{class:"common-btn noborder pleft",onClick:L(()=>{},["stop"])},[l(b(Ta),{class:"collapse-arraw-icon"}),e[4]||(e[4]=E(" 更多 "))])]),_:2},1024)])],8,pe),U(i)?(r(),y("div",ye,[l(Xa,{columns:pa.value,tableData:H.value},null,8,["columns","tableData"])])):R("",!0)]))),128))])):R("",!0),l(b(g)),l(wa,{open:h.value,"onUpdate:open":e[1]||(e[1]=i=>h.value=i),title:"提示",onOk:X},{footer:_(()=>[l(G,{key:"back",onClick:va},{default:_(()=>e[7]||(e[7]=[E("取消")])),_:1}),l(G,{key:"submit",type:"primary",loading:V.value,onClick:X},{default:_(()=>e[8]||(e[8]=[E("确认")])),_:1},8,["loading"])]),default:_(()=>[n("div",ge,x(P.value),1),n("div",Ce,x(F.value),1)]),_:1},8,["open"])])}}}),Oe=oa(ke,[["__scopeId","data-v-52b9f4cc"]]);export{Oe as default};
